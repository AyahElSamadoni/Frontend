<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Containers/Profile/Profile.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Containers/Profile/Profile.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { Component } from "react";
import { connect } from "react-redux";
import Nav from "../../Components/NavBar/NavBar";
import Tweet from "../../Components/Tweet/Tweet";
import "./Profile.css";
import Axios from "axios";
import { setProfile } from "../../Actions/profileActions";
import { runInThisContext } from "vm";
import { zoomInUp } from "react-animations";
import Radium, { StyleRoot } from "radium";
/**
 * This is a description of the profile Component.
 * @class
 * */
class profile extends Component {
  constructor(props) {
    super(props);
    /**
    * @property {json[]}  novas             - The user's novas.
    * @property {json[]}  likedNovas      - The user's liked novas.
    * @property {string} id                  -The user's unique id.
    * @property {string} screenName          -The user's unique screen name.
    * @property {string} userName          -The user's name.
    * @property {string} bio          -The user's brief biography.
    * @property {string} location          -The user's current location.
    * @property {integer} followerscount         -The user's followers count.
    * @property {integer} followingcount          -The user's following count.
    * @property {integer} novascount          -The user's novas count.
    * @property {string[]} novasIDs         -Array of the IDs of the novas.
    * @property {string[]} favNovasIDs         -Array of the IDs of the favorited novas.
    * @property {string} novasClass         -The novas option in the tab bar styling class.
    * @property {string} likesClass         -The likes option in the tab bar styling class.
    * @property {JSX} toggledButton         -The button to be rendered according to authentication.
    * @property {JSON[]} posts        -The posts currently rendered.
    * @property {JSX} contentShown        -The container of posts currently displayed.
    
    **/
    state = {
      tweets: [],
      likedTweets: [],
      id: "",
      screenName: "",
      userName: "",
      bio: "",
      location: "",
      followerscount: 0,
      followingcount: 0,
      novascount: 0,
      novaIDs: [],
      favNovasIDs: [],
      novasClass: "active",
      likesClass: "",
      toggledButton: null,
      posts: null,
      contentShown: (
        &lt;div role="tabpanel" id="Section1">
          &lt;menu>
            &lt;div className="d-flex flex-column bd-highlight mb-3 justify-content-center align-items-center" />
          &lt;/menu>
        &lt;/div>
      )
    };
  }
  tabChangedHandler = (event, tabtIdentifier) => {
    console.log("clicked");

    if (tabtIdentifier === "0") {
      console.log("nova clicked");
      const novasClass = "active";
      const likesClass = "";
      const posts = this.state.tweets.reverse().map(tweet => {
        return (
          &lt;Tweet
            screenName={tweet.user_screen_name}
            userName={tweet.user_name}
            text={tweet.tweet_text}
            isAuth={tweet.user_name === this.props.auth.profile._id}
          />
        );
      });

      const contentShown = (
        &lt;div role="tabpanel" id="Section1">
          &lt;menu>
            &lt;div className="d-flex flex-column bd-highlight mb-3 justify-content-center align-items-center">
              {posts}
            &lt;/div>
          &lt;/menu>
        &lt;/div>
      );
      this.setState({
        novasClass: novasClass,
        likesClass: likesClass,
        posts: posts
      });
    } else if (tabtIdentifier === "1") {
      console.log("like clicked ");
      const novasClass = "";
      const likesClass = "active";
      console.log(this.state.likedTweets);
      const posts = this.state.likedTweets.reverse().map(tweet => {
        return (
          &lt;Tweet
            key={tweet._id}
            screenName={tweet.user_screen_name}
            userName={tweet.user_screen_name}
            text={tweet.tweet_text}
            isAuth={tweet.user_name === this.props.auth.profile._id}
          />
        );
      });

      const contentShown = (
        &lt;div role="tabpanel" id="Section2">
          &lt;menu>
            &lt;div className="d-flex flex-column bd-highlight mb-3 justify-content-center align-items-center">
              {posts}
            &lt;/div>
          &lt;/menu>
        &lt;/div>
      );
      this.setState({
        novasClass: novasClass,
        likesClass: likesClass,
        posts: posts,
        contentShown: contentShown
      });
    }
  };

  componentDidMount() {
    //Get my tweets
    Axios.get("http://3.19.122.178:3000/statuses/user_timeline", {
      headers: {
        token: localStorage.getItem("jwtToken")
      }
    })
      .then(res => {
        console.log("success from tweets");
        console.log(res.data);
        this.setState({ tweets: res.data });
        //ghalat 3ashan el state bayza
        const posts = this.state.tweets.reverse().map(tweet => {
          return (
            &lt;Tweet
              key={tweet._id}
              screenName={tweet.user_screen_name}
              userName={tweet.user_name}
              text={tweet.text}
              isAuth={tweet.user === this.props.auth.profile._id}
            />
          );
        });
        const styles = {
          zoomInUp: {
            animation: "x 1s",
            animationName: Radium.keyframes(zoomInUp, "zoomInUp")
          }
        };
        const contentShown = (
          &lt;div role="tabpanel" id="Section1">
            &lt;menu>
              &lt;StyleRoot>
                &lt;div
                  className="d-flex flex-column bd-highlight mb-3 justify-content-center align-items-center"
                  style={styles.zoomInUp}
                >
                  {posts}
                &lt;/div>
              &lt;/StyleRoot>
            &lt;/menu>
          &lt;/div>
        );
        this.setState({
          posts: posts,
          contentShown: contentShown
        });
        //this.setState({ tweets: res.data });
      })
      .catch(err => {
        console.log("failure from tweets", { ...err });
      });
    //Get Liked tweets
    /* Axios.get("http://www.mocky.io/v2/5cb6078d330000e1345d7fb5")
      .then(res => {
        this.setState({ likedTweets: res.data });
      })
      .catch(err => {
        console.log(err);
      });*/
  }
  componentWillMount() {
    if (this.props.auth.me) {
      let toggledButton = this.state.toggledButton;
      toggledButton = (
        &lt;button className="btn profilebtn profile-edit-btn">
          &lt;a href="/editprofile" className="referencecolor">
            Edit Profile
          &lt;/a>
        &lt;/button>
      );
      this.setState({
        toggledButton: toggledButton
      });
    } else {
      let toggledButton = this.state.toggledButton;
      toggledButton = (
        &lt;button className="btn profilebtn profile-edit-btn">
          &lt;a className="referencecolor">Follow&lt;/a>
        &lt;/button>
      );
      this.setState({
        toggledButton: toggledButton
      });
    }
  }
  componentWillReceiveProps(nextprops) {
    if (nextprops.auth.me) {
      console.log("me is true");
      let toggledButton = this.state.toggledButton;
      toggledButton = (
        &lt;button className="btn profilebtn profile-edit-btn">
          &lt;a href="/editprofile" className="referencecolor">
            Edit Profile
          &lt;/a>
        &lt;/button>
      );
      this.setState({
        toggledButton: toggledButton
      });
    } else {
      console.log("me is false");
      let toggledButton = this.state.toggledButton;
      toggledButton = (
        &lt;button className="btn profilebtn profile-edit-btn">
          &lt;a className="referencecolor">Follow&lt;/a>
        &lt;/button>
      );
      this.setState({
        toggledButton: toggledButton
      });
    }
    Axios.get("http://3.19.122.178:3000/statuses/user_timeline", {
      headers: {
        token: Axios.defaults.headers.common.Authorization
      }
    })
      .then(res => {
        console.log("success from will receive props", { ...res });
        this.setState({ tweets: res.data });
        //ghalat 3ashan el state bayza
        const posts = this.state.tweets.reverse().map(tweet => {
          return (
            &lt;Tweet
              key={tweet._id}
              screenName={tweet.user_screen_name}
              userName={tweet.user_name}
              text={tweet.text}
              isAuth={tweet.user === this.props.auth.profile._id}
            />
          );
        });
        const styles = {
          zoomInUp: {
            animation: "x 1s",
            animationName: Radium.keyframes(zoomInUp, "zoomInUp")
          }
        };
        const contentShown = (
          &lt;div role="tabpanel" id="Section1">
            &lt;menu>
              &lt;StyleRoot>
                &lt;div
                  className="d-flex flex-column bd-highlight mb-3 justify-content-center align-items-center"
                  style={styles.zoomInUp}
                >
                  {posts}
                &lt;/div>
              &lt;/StyleRoot>
            &lt;/menu>
          &lt;/div>
        );

        this.setState({
          posts: posts,
          contentShown: contentShown
        });
      })
      .catch(err => {
        console.log("failure from tweets", { ...err });
      });
  }
  render() {
    return (
      &lt;div className="body">
        &lt;Nav />
        &lt;div className="container widthadjust">
          &lt;div className="profilecontainer ">
            &lt;div className="profile">
              &lt;div className="profile-image">
                &lt;img
                  className="imgwidth"
                  src={this.props.auth.profile.profile_image_url}
                />
              &lt;/div>

              &lt;div className="profile-user-settings">
                &lt;h1 className="profile-user-name">
                  {this.props.auth.profile.screen_name}
                &lt;/h1>

                {this.state.toggledButton}
              &lt;/div>

              &lt;div className="profile-stats">
                &lt;li>
                  &lt;span className="profile-stat-count">
                    {this.props.auth.profile.novas_count}
                  &lt;/span>{" "}
                  Novas
                &lt;/li>
                &lt;li>
                  &lt;span className="profile-stat-count">
                    {this.props.auth.profile.followers_count}
                  &lt;/span>{" "}
                  followers
                &lt;/li>
                &lt;li>
                  &lt;span className="profile-stat-count">
                    {this.props.auth.profile.friends_count}
                  &lt;/span>{" "}
                  following
                &lt;/li>
              &lt;/div>

              &lt;div className="profile-bio">
                &lt;p>
                  &lt;span className="profile-real-name">
                    {this.props.auth.profile.name}
                  &lt;/span>{" "}
                  {this.props.auth.profile.bio}
                &lt;/p>
              &lt;/div>
            &lt;/div>
          &lt;/div>

          &lt;div className="container ">
            &lt;div className="centerdiv">
              &lt;div className="row ">
                &lt;div className="col-md-6 ">
                  &lt;div className="tab" role="tabpanel">
                    &lt;ul className="nav nav-tabs" role="tablist">
                      &lt;li role="presentation" className={this.state.novasClass}>
                        &lt;a
                          aria-controls="novas"
                          role="tab"
                          data-toggle="tab"
                          onClick={event => this.tabChangedHandler(event, "0")}
                        >
                          Novas
                        &lt;/a>
                      &lt;/li>
                    &lt;/ul>
                  &lt;/div>
                &lt;/div>
                &lt;div className="col-md-6 ">
                  &lt;div className="tab" role="tabpanel">
                    &lt;ul className="nav nav-tabs" role="tablist">
                      &lt;li role="presentation" className={this.state.likesClass}>
                        &lt;a
                          aria-controls="likes"
                          role="tab"
                          data-toggle="tab"
                          onClick={event => this.tabChangedHandler(event, "1")}
                        >
                          Likes
                        &lt;/a>
                      &lt;/li>
                    &lt;/ul>
                  &lt;/div>
                &lt;/div>
                &lt;div className="col-md-12 ">
                  &lt;div class="tab-content tabs">{this.state.contentShown}&lt;/div>
                &lt;/div>
              &lt;/div>
            &lt;/div>
          &lt;/div>
        &lt;/div>
      &lt;/div>
    );
  }
}

const mapStateToProps = state => ({
  auth: state.auth,
  me: state.me,
  profile: state.profile
});

export default connect(
  mapStateToProps,
  { setProfile }
)(profile);
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="forgotPassword.html">forgotPassword</a></li><li><a href="login.html">login</a></li><li><a href="profile.html">profile</a></li><li><a href="signup.html">signup</a></li></ul><h3>Global</h3><ul><li><a href="global.html#button">button</a></li><li><a href="global.html#input">input</a></li><li><a href="global.html#LandingPage">LandingPage</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Wed Apr 17 2019 10:07:13 GMT+0200 (Egypt Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
